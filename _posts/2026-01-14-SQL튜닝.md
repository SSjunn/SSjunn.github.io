---
title: "SQL 튜닝"
date: 2025-12-30
categories: [CS공부]
tags: [CS]
---

# SQL 튜닝(SQL Tuning)이란?

데이터베이스에서 원하는 데이터를 가장 빠르고 효율적으로 가져올 수 있도록 SQL 문을 최적화 하는 과정.
DB의 응답 시간(Response Time)을 단축하고 리소스(CPU, 메모리) 사용을 최적화 하는 것이 목적.


# SQL 튜닝 용어

**드라이빙 테이블, 드리븐 테이블**
```SQL
SELECT 학생.학번, 학생.이름, 비상연락망.관계, 비상연락망.연락처
FROM 학생
JOIN 비상연락망 ON 학생.학번 = 비상연락망.학번
WHERE 학생.학번 IN (1, 100)
```

- 드라이빙 테이블 : 먼저 접근하는 테이블 (학생)
- 드리븐 테이블: 후행으로 접근하는 테이블 (비상연락망)
- 가능한 적은 결과가 반환될 것으로 예상되는 테이블을 드라이빙 테이블로 잡아야 함

<details>
<summary><b>개념적인 튜닝 용어</b></summary>
<br>
- 오브젝트 스캔 유형 : 테이블 스캔, 인덱스 스캔
- 테이블 스캔 : 인덱스를 거치지 않고 바로 디스크에 위치한 테이블 데이터에 접근하는 유형
  - 데이터 양이 적을 때는 인덱스를 찾는 과정이 없어서 빠르나 데이터가 많으면 시간이 오래 걸리고 시스템 과부화
  - WHERE 절에 인덱스가 걸려있지 않은 컬럼을 조건으로 걸었을 때 발생
- 인덱스 스캔 : 인덱스로 테이블 데이터를 접근하는 유형
  - 원하는 데이터가 어디 있는지 미리 알기 때문에 검색 속도가 매우 빠름
  - WEHRE 절에 인덱스가 생성된 컬럼을 조건으로 사용했을 때 작동

**정리** : 테이블 스캔은 소량의 데이터나 전체 데이터를 읽을 때 유리하며 인덱스 스캔은 특정 조건의 데이터를 빠르게 찾을 때 유리

**테이블 풀 스캔(table full scan)**
- 인덱스를 거치지 않고 테이블로 바로 접근하여 처음부터 끝까지 데이터를 훑어보는 방식
- WHERE 절의 조건문을 기준으로 활용할 인덱스가 없거나, 전체 데이터 대비 대량의 데이터가 필요할 때, 인덱스 활용보다 테이블 풀 스캔이 효율적이라고 판단할 때 수행할 수 있음

**인덱스 범위 스캔 (index range scan)**
- 인덱스를 범위(range) 기준으로 스캔한 뒤 스캔 결과를 토대로 테이블의 데이터를 찾는 방식
- 좁은 범위의 데이터를 스캔할 때는 효율적일 수 있으나, 넓은 범위 스캔 시 비효율적일 수 있음
- ex) BETWEEN, AND, <, >, LIKE 구문 등에 활용

**인덱스 고유 스캔 (index unique scan)**
- 기본 키나 고유 인덱스로 테이블에 접근하는 방식으로, 인덱스 사용 스캔 방식 중 가장 효율적인 방식
- WHERE 절에 = 조건문으로 작성하며, 해당 열이 PK나 unique index의 선두 열로 선정되었을 때 활용
- 최소한의 페이지(데이터 검색 최소 단위) 에 접근할 수 있도록 접근 범위를 줄이고, 효율적인 인덱스를 활용할 수 있도록 튜닝

**카디널리티 (cardinality)**
- 하나의 데이터 유형으로 정의되는 데이터 행의 갯수
- 전체 데이터에 접근한 뒤 출력될 것이라 예상되는 데이터 건수
- 전체 행에 대한 특정 열의 중복 수치를 나타내는 지표

**콜레이션 (collation)**
- 특정 문자셋으로 데이터베이스에 저장된 값을 비교하거나 정렬하는 작업의 규칙 (utf8_bin, utf_8_general_ci)
- 캐릭터셋 (charset): 데이터 저장을 어떻게 할 것인가?
- 콜레이션 (collation): 데이터 정렬을 어떻게 할 것인가?

</details>














